import{e as m,f as u,l as w,c as r,a as e,F as _,h as f,i as x,o as n,t as l}from"./index-f3e9be40.js";const k={key:0,class:"flex flex-col"},b={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},$={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},v={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},C={class:"min-w-full divide-y divide-gray-200"},I=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 大頭照 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 帳號 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 暱稱 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 申請狀態 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 動作 ")])],-1),S={class:"bg-white divide-y divide-gray-200"},j={class:"px-6 py-4 whitespace-nowrap text-gray-500"},B={class:"px-6 py-4 whitespace-nowrap text-gray-500"},M=["src"],A={class:"px-6 py-4 whitespace-nowrap text-gray-500"},E={class:"px-6 py-4 whitespace-nowrap text-gray-500"},P={class:"px-6 py-4 whitespace-nowrap text-gray-500"},U={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},z={key:0,class:"flex gap-4"},D=["onClick"],N=["onClick"],T={key:1},O=m({__name:"ＭanageUsers",setup(W){const c="https://islandofhealing.rocket-coding.com/api",d=u([]),p=async()=>{const s=localStorage.getItem("token");if(s)try{const t=await(await fetch(`${c}/administratorwriters/get`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${s}`}})).json();if(console.log(t),t.StatusCode===200)d.value=t.UserData;else throw new Error(`發生錯誤 ${t.Message}`)}catch(a){console.log(a)}};w(p);const h=async s=>{const a=localStorage.getItem("token");if(a)try{const o=await(await fetch(`${c}/writernotification/create?writerid=${s}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`},method:"POST"})).json();if(console.log(o),o.StatusCode===200)console.log(o.Message),await y(s);else throw new Error(`發生錯誤 ${o.Message}`)}catch(t){console.log(t)}},y=async s=>{const a=localStorage.getItem("token");if(a)try{const o=await(await fetch(`${c}/pusher/bewriter?writerid=${s}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`},method:"POST"})).json();if(console.log(o),o.StatusCode===200)console.log("pushed");else throw new Error(`發生錯誤 ${o.Message}`)}catch(t){console.log(t)}},g=async(s,a)=>{const t=localStorage.getItem("token");if(t)try{const i=await(await fetch(`${c}/applyforwriterresult/${s}/${a}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`},method:"PUT"})).json();if(console.log(i),i.StatusCode===200)alert(i.Message),h(s),p();else throw new Error(`發生錯誤 ${i.Message}`)}catch(o){console.log(o)}};return(s,a)=>d.value?(n(),r("div",k,[e("div",b,[e("div",$,[e("div",v,[e("table",C,[I,e("tbody",S,[(n(!0),r(_,null,f(d.value,t=>(n(),r("tr",{key:t.Id},[e("td",j,l(t.Id),1),e("td",B,[e("img",{src:t.ImgUrl,alt:"User Image",class:"h-10 w-10 rounded-full"},null,8,M)]),e("td",A,l(t.Account),1),e("td",E,l(t.Nickname),1),e("td",P,l(t.WriterProgress),1),e("td",U,[t.WriterProgress==="已申請"?(n(),r("div",z,[e("button",{type:"button",class:"btn btn-sm font-medium bg-green-300",onClick:o=>g(t.Id,"3")}," 審核通過 ",8,D),e("button",{type:"button",class:"btn btn-sm font-medium bg-red-300",onClick:o=>g(t.Id,"2")}," 審核失敗 ",8,N)])):(n(),r("div",T,"-"))])]))),128))])])])])])])):x("",!0)}});export{O as default};
