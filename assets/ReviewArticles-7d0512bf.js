import{e as y,f as m,j as _,c as i,a as e,F as x,h as w,i as f,o as l,t as r,k as v,v as k,l as b}from"./index-1d0513ee.js";const I={key:0,class:"flex flex-col"},P={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},S={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},C={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},A=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 標題 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 創建日期 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 作者 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 目前進度 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 變更進度 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"})])],-1),B={class:"bg-white divide-y divide-gray-200"},N={class:"px-6 py-4 whitespace-nowrap text-gray-500"},V={class:"px-6 py-4 whitespace-nowrap text-gray-500"},j={class:"px-6 py-4 whitespace-nowrap text-gray-500"},D={class:"px-6 py-4 whitespace-nowrap text-gray-500"},M={class:"px-6 py-4 whitespace-nowrap text-gray-500"},E={class:"px-6 py-4 whitespace-nowrap text-gray-500"},U={class:"py-1 flex gap-4"},z=["onUpdate:modelValue"],F=b('<option disabled selected>審核進度</option><option value="1">待審核</option><option value="2">審核中</option><option value="3">審核失敗</option><option value="4">審核成功</option>',5),L=[F],T={class:"px-6 py-4 whitespace-nowrap text-gray-500"},J=["onClick"],W=y({__name:"ReviewArticles",setup(O){const d="https://islandofhealing.rocket-coding.com/api",h=s=>{switch(s){case"待審核":return"1";case"審核中":return"2";case"審核失敗":return"3";case"審核成功":return"4";default:return"1"}},n=m([]),p=async()=>{const s=localStorage.getItem("token");if(s)try{const t=await(await fetch(`${d}/administratorarticles/get`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${s}`}})).json();if(console.log(t),t.StatusCode===200)n.value=t.ArticlesData.map(o=>({...o,newProgress:h(o.Progress)})),console.log(n.value);else throw new Error(`發生錯誤 ${t.Message}`)}catch(a){console.log(a)}};_(p);const u=async(s,a)=>{const t=localStorage.getItem("token"),o=localStorage.getItem("adminId");if(!(!t&&!o))try{const c=await(await fetch(`${d}/article/updateprogress/${a}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`},method:"PUT",body:JSON.stringify({Progress:s.newProgress})})).json();if(console.log(c),c.StatusCode===200)alert(c.Message),p();else throw new Error(`發生錯誤 ${c.Message}`)}catch(g){console.log(g)}};return(s,a)=>n.value?(l(),i("div",I,[e("div",P,[e("div",S,[e("div",C,[e("table",$,[A,e("tbody",B,[(l(!0),i(x,null,w(n.value,t=>(l(),i("tr",{key:t.Id},[e("td",N,r(t.Id),1),e("td",V,r(t.Title),1),e("td",j,r(new Date(t.Initdate).toLocaleString()),1),e("td",D,r(t.WriterNickName),1),e("td",M,r(t.Progress),1),e("td",E,[e("div",U,[v(e("select",{"onUpdate:modelValue":o=>t.newProgress=o,class:"w-30 select select-sm select-bordered"},L,8,z),[[k,t.newProgress]])])]),e("td",T,[e("button",{type:"button",class:"btn-sm bg-slate-300 font-normal btn self-end",onClick:o=>u(t,t.Id)}," 確認 ",8,J)])]))),128))])])])])])])):f("",!0)}});export{W as default};
