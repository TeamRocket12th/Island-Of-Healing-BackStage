import{e as y,f as m,l as _,c as n,a as t,F as u,h as w,i as x,o as r,t as i}from"./index-89785fe1.js";const f={key:0,class:"flex flex-col"},k={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},b={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},v={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},C=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," ID "),t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 大頭照 "),t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 帳號 "),t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 暱稱 "),t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 申請狀態 "),t("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 動作 ")])],-1),I={class:"bg-white divide-y divide-gray-200"},S={class:"px-6 py-4 whitespace-nowrap text-gray-500"},B={class:"px-6 py-4 whitespace-nowrap text-gray-500"},j=["src"],M={class:"px-6 py-4 whitespace-nowrap text-gray-500"},A={class:"px-6 py-4 whitespace-nowrap text-gray-500"},U={class:"px-6 py-4 whitespace-nowrap text-gray-500"},D={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},E={key:0,class:"flex gap-4"},P=["onClick"],z=["onClick"],N={key:1},T=y({__name:"ＭanageUsers",setup(F){const l="https://islandofhealing.rocket-coding.com/api",d=m([]),p=async()=>{const s=localStorage.getItem("token");if(s)try{const e=await(await fetch(`${l}/administratorwriters/get`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${s}`}})).json();if(console.log(e),e.StatusCode===200)d.value=e.UserData;else throw new Error(`發生錯誤 ${e.Message}`)}catch(a){console.log(a)}};_(p);const h=async s=>{const a=localStorage.getItem("token");if(a)try{const o=await(await fetch(`${l}/writernotification/create?writerid=${s}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${a}`},method:"POST"})).json();if(console.log(o),o.StatusCode===200)console.log(o.Message);else throw new Error(`發生錯誤 ${o.Message}`)}catch(e){console.log(e)}},g=async(s,a)=>{const e=localStorage.getItem("token");if(e)try{const c=await(await fetch(`${l}/applyforwriterresult/${s}/${a}`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${e}`},method:"PUT"})).json();if(console.log(c),c.StatusCode===200)alert(c.Message),h(s),p();else throw new Error(`發生錯誤 ${c.Message}`)}catch(o){console.log(o)}};return(s,a)=>d.value?(r(),n("div",f,[t("div",k,[t("div",b,[t("div",v,[t("table",$,[C,t("tbody",I,[(r(!0),n(u,null,w(d.value,e=>(r(),n("tr",{key:e.Id},[t("td",S,i(e.Id),1),t("td",B,[t("img",{src:e.ImgUrl,alt:"User Image",class:"h-10 w-10 rounded-full"},null,8,j)]),t("td",M,i(e.Account),1),t("td",A,i(e.Nickname),1),t("td",U,i(e.WriterProgress),1),t("td",D,[e.WriterProgress==="已申請"?(r(),n("div",E,[t("button",{type:"button",class:"btn btn-sm font-medium bg-green-300",onClick:o=>g(e.Id,"3")}," 審核通過 ",8,P),t("button",{type:"button",class:"btn btn-sm font-medium bg-red-300",onClick:o=>g(e.Id,"2")}," 審核失敗 ",8,z)])):(r(),n("div",N,"-"))])]))),128))])])])])])])):x("",!0)}});export{T as default};
