import{S as m}from"./sweetalert2.all-9555961e.js";import{f as w,e as f,l as _,c as g,p as x,a as e,F as k,h as A,i as S,o as h,t as r,n as b}from"./index-88941983.js";const v=()=>{const y="https://islandofhealing.rocket-coding.com/api",n=w([]);return{getAllArticles:async()=>{const i=localStorage.getItem("token");if(i)try{const l=await(await fetch(`${y}/administratorarticles/get`,{headers:{"Content-type":"application/json",Authorization:`Bearer ${i}`}})).json();if(l.StatusCode===200)n.value=l.ArticlesData.map(u=>({...u})).reverse();else throw new Error(`發生錯誤 ${l.Message}`)}catch(p){console.error(p)}},reviewArticles:n}},$={key:0,class:"flex flex-col"},B={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},C={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},I={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},j={class:"min-w-full divide-y divide-gray-200"},z=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 標題 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 創建日期 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 作者 "),e("th",{scope:"col",class:"px-6 py-3 text-left font-medium text-gray-500 uppercase tracking-wider"}," 精選文章 "),e("th",{scope:"col",class:"px-6 py-3 font-medium text-gray-500 uppercase tracking-wider text-center"}," 確認動作 ")])],-1),D={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap text-gray-500"},L={class:"px-6 py-4 whitespace-nowrap text-gray-500"},M={class:"px-6 py-4 whitespace-nowrap text-gray-500"},N={class:"px-6 py-4 whitespace-nowrap text-gray-500"},T={class:"px-6 py-4 whitespace-nowrap text-gray-500"},F={class:"text-center"},P={class:"px-6 py-4 whitespace-nowrap text-gray-500 text-center"},U=["onClick"],q=f({__name:"BestArticle",setup(y){const n="https://islandofhealing.rocket-coding.com/api",{getAllArticles:d,reviewArticles:i}=v(),p=async(o,a)=>{const t=localStorage.getItem("token");if(t)try{const s=await(await fetch(`${n}/selectedarticle/${o}`,{method:"PUT",headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`}})).json();if(console.log(s),s.StatusCode===200)s.Selected=a,m.fire("新增精選成功","該文章已被加入精選列表","success"),d();else throw new Error(`發生錯誤 ${s.Message}`)}catch(c){console.log(c)}},l=async(o,a)=>{const t=localStorage.getItem("token");if(t)try{const s=await(await fetch(`${n}/cancelselectedarticle/${o}`,{method:"PUT",headers:{"Content-type":"application/json",Authorization:`Bearer ${t}`}})).json();if(console.log(s),s.StatusCode===200)s.Selected=a,m.fire("刪除精選成功","該文章已被移除精選列表","success"),d();else throw new Error(`發生錯誤 ${s.Message}`)}catch(c){console.log(c)}},u=async o=>{const a=!o.Selected;a?await p(o.Id,a):await l(o.Id,a)};return _(d),(o,a)=>(h(),g("h1",null,[x(i)?(h(),g("div",$,[e("div",B,[e("div",C,[e("div",I,[e("table",j,[z,e("tbody",D,[(h(!0),g(k,null,A(x(i),t=>(h(),g("tr",{key:t.Id},[e("td",E,r(t.Id),1),e("td",L,r(t.Title),1),e("td",M,r(new Date(t.Initdate).toLocaleString()),1),e("td",N,r(t.WriterNickName),1),e("td",T,[e("p",F,r(t.Selected?"是":"否"),1)]),e("td",P,[e("button",{onClick:c=>u(t)},[e("button",{class:b(["border ml-2 p-2 h-[40px] px-4 text-white rounded",t.Selected?"bg-rose-700":"bg-green-700"])},r(t.Selected?"刪除精選":"新增精選"),3)],8,U)])]))),128))])])])])])])):S("",!0)]))}});export{q as default};
